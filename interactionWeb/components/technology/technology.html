<link rel="stylesheet" href="assets/css/technology.css">
<style>
    @media screen and (min-width: 1360px) and (max-width: 1920px) {
        .layui-input, .layui-select, .xm-select-parent{
            width: 200px;

        }
        .layui-form-label{
            font-size: 14px;
        }
    }

    @media screen and (min-width: 1920px) {
        .layui-input, .layui-select{
            width: 260px;
        }
        .table-top-bar .layui-form-label{
            width: 90px;
        }

        .layui-form-label{
            font-size: 14px;
        }
    }

    @media screen and (max-width: 1360px) {
        .layui-input, .layui-select{
            width: 160px;
        }
        .layui-form-label{
            font-size: 12px;
        }

    }
</style>
<div class="layui-row layui-col-space15">
    <!-- 单列普通表格 -->
    <div class="layui-col-md12">
        <div class="layui-card p-main">

            <!-- 卡片容器 -->
            <div class="layui-card-body">
                <div class="layui-card-header">
                    <!--<div class="pull-right"><label id="flex2">展开</label><i class="layui-icon layui-icon-down"></i><i class="layui-icon layui-icon-up hide"></i>&lt;!&ndash;<img src="../../assets/images/arrowdown.png" /><img class="hide" src="../../assets/images/arrowup.png" />&ndash;&gt;</div>-->
                    <div class="line">查询条件</div>
                </div>
                <!-- 数据表格顶部控制栏 -->
                <div id='search-form' class="layui-form">
                    <div class="layui-form-item table-top-bar">
                        <div class=" layui-row ">
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1">
                                <span class="layui-form-label">零件号</span>
                                <div class="layui-inline">
                                    <i class="layui-icon icon-search"></i>
                                    <select name="partsCodeList" id="partsCode" placeholder="请选择" lay-filter="partsCode" lay-search>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1">
                                <span class="layui-form-label">零件名称</span>
                                <div class="layui-inline">
                                    <input type="text" name="partsNameList" placeholder="请选择" class="layui-input">
                                </div>
                            </div>

                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1">
                                <span class="layui-form-label">车型/机型</span>
                                <div class="layui-inline">
                                    <select name="carTypeList" id="carType" placeholder="请选择" lay-filter="carType" lay-search>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1">
                                <span class="layui-form-label">特性名称</span>
                                <div class="layui-inline">
                                    <!--<select name="characterName" id="characterName" placeholder="选择特性名称" lay-filter="characterName" lay-search>-->
                                    <!--</select>-->
                                    <input type="text" name="characterNameList" placeholder="请选择" class="layui-input">
                                </div>
                            </div>
                        </div>
                        <div class=" layui-row " style="margin-top: 15px">
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1">
                                <span class="layui-form-label">CP</span>
                                <div class="layui-inline">
                                    <select name="cp" id="cp" placeholder="请选择" lay-filter="cp" lay-search>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1">
                                <span class="layui-form-label">CPK</span>
                                <div class="layui-inline">
                                    <select name="cpk" id="cpk" placeholder="请选择" lay-filter="cpk" lay-search>
                                    </select>

                                </div>
                            </div>
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1">
                                <span class="layui-form-label">检测日期</span>
                                <div class="layui-inline">
                                    <input autocomplete="off" type="text" name="inspectDate" id="inspectDate" placeholder="请选择" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-col-xs6 layui-col-sm6 layui-col-md3 search-item1" style="padding-left: 80px">
                                <button class="layui-btn layui-btn-sm layui-btn-normal" lay-submit lay-filter="search_ability" id="search_ability"><span>查询</span></button>
                                <button class="layui-btn layui-btn-sm layui-btn-primary" lay-submit lay-filter="reset_ability"><span>重置</span></button>
                                <!--help按钮 获得表单导出时表单值-->
                                <button class="layui-btn layui-btn-sm layui-btn-primary" id="form_export" lay-submit lay-filter="form_export" style="display: none"></button>
                            </div>
                        </div>

                    </div>
                </div >
                <div class="layui-card-header">
                    <div class="line">表格数据</div>
                    <div ><i class="layui-icon layui-icon-refresh" style="vertical-align: middle;"></i>刷新</div>

                </div>

                <div class="btn-area">
                    <div class="pull-right">
                        <button class="layui-btn layui-btn-primary layui-btn-sm manage " id="btn-export"><i class="layui-icon layui-icon-release"></i>总清单导出</button>
                    </div>
                    <div>
                        <button class="layui-btn layui-btn-primary layui-btn-sm manage "><i class="layui-icon layui-icon-search"></i>查询</button>
                    </div>

                </div>
                <table id="tableContent-ability" lay-filter="tableContent-ability"></table>

                <div class="layui-row">
                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6" style="padding-right: 3.5px">
                        <div class="layui-card-header">
                            <div class="line">X-控制图</div>
                        </div>
                        <div id="x-chart" class="line-chart"></div>
                    </div>
                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6" style="padding-left: 3.5px">
                        <div class="layui-card-header" style="padding-left: 10px">
                            <div class="line">R-控制图</div>
                        </div>
                        <div id="r-chart" class="line-chart"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // 初始化 layui
    layui.use(['laydate', 'table'], function() {
        var table = layui.table,
            form = layui.form,
            laydate = layui.laydate,
            config = layui.config,
            processId='',
            admin = layui.admin;

        laydate.render({
            elem: '#inspectDate',
            range: true,
            type: 'date',
        });

        /*
           查询车型、机型
         */
        admin.req('/api-edu/interaction/abilitysetting/cartype', {}, function(res) {

            var elem = $('#carType');
            elem.empty();
            elem.append('<option value=""></option>');
            for (var i = 0; i < res.data.length; i++) {
                elem.append('<option value="' + res.data[i] + '">' + res.data[i] + '</option>')
            }
            form.render('select');

        }, {
            method: 'get'
        });

        setSelectData('abilitylist/cp','#cp','name','value');
        setSelectData('abilitylist/cpk','#cpk','name','value');
        setSelectData('abilitysetting/parts','#partsCode','partsCode','partsCode');
        function setSelectData(url,id,name,value)
        {
            admin.req('/api-edu/interaction/'+url, {}, function(res) {

                var elem = $(id);
                elem.empty();
                elem.append('<option value=""></option>');
                for(var i=0;i<res.data.length;i++)
                {
                    elem.append('<option value="' + res.data[i][value] + '">' + res.data[i][name] + '</option>')
                }
                form.render('select');

            }, {
                method: 'get'
            });
        };


        /*
       查询特性名称
     */
        admin.req('/api-edu/interaction/abilitysetting/character', {}, function(res) {

            var elem = $('#characterName');
            elem.empty();
            elem.append('<option value=""></option>');
            for (var i = 0; i < res.data.length; i++) {
                elem.append('<option value="' + res.data[i] + '">' + res.data[i] + '</option>')
            }
            form.render('select');

        }, {
            method: 'get'
        });

        var renderTable = function(search) {
            if (!search) {
                search = {};
            }
            // 渲染表格
            table.render({
                elem: '#tableContent-ability',
                id: 'tableContent-ability',
                url: admin.formatUrl('/api-edu/interaction/abilitylist/list'),
                // 格式化后台返回的数据
                parseData: function(res) { //res 即为原始返回的数据
                    // 返回结果，进行渲染表格
                    if (res.data.list.length>0)
                    {
                        getXbarData(res.data.list[0])
                        res.data.list[0].LAY_CHECKED=true;
                    }
                    return {
                        "code": res.respCode, //解析接口状态
                        "msg": res.message, //解析提示文本
                        "count": res.data.count, //解析数据长度
                        "data": res.data.list //解析数据列表
                    };
                },
                cols: [
                    [{
                        type: 'radio',
                        rowspan: '2',
                    }, {
                        field: 'partsCode',
                        rowspan: '2',
                        align:"center",
                        width:80,
                        templet: function(d) {
                            var value= d.partsCode?d.partsCode:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },
                        title: '零件号'
                    }, {
                        field: 'partsName',
                        rowspan: '2',
                        align:"center",
                        width:80,
                        templet: function(d) {
                            var value= d.partsName?d.partsName:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },
                        title: '零件名称'
                    }, {
                        field: 'carType',
                        rowspan: '2',
                        align:"center",
                        templet: function(d) {
                            var value= d.partsName?d.partsName:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },
                        title: '车型/机型'
                    }, {
                        field: 'characterName',
                        rowspan: '2',
                        align:"center",
                        templet: function(d) {
                            var value= d.characterName?d.characterName:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },
                        title: '特性名称'
                    }, {
                        title: '技术要求',
                        align: 'center',
                        colspan: '3',
                    }, {
                        field: 'chartType',
                        rowspan: '2',
                        align:"center",
                        templet: function(d) {
                            var value= d.chartType?d.chartType:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },
                        title: '控制图类型'
                    }, {
                        field: 'average',
                        rowspan: '2',
                        title: '均值',
                        templet: function(d) {
                            var value= d.average?d.average:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },
                        align:"center",

                    }, {
                        field: 'xmaxXmin',
                        rowspan: '2',
                        title: '极差',
                        align:"center",
                        templet: function(d) {
                            var value= d.xmaxXmin?d.xmaxXmin:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },

                    }, {
                        field: 'std',
                        rowspan: '2',
                        title: '标准差',
                        align:"center",
                        templet: function(d) {
                            var value= d.partsName?d.partsName:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },

                    }, {
                        field: 'cp',
                        rowspan: '2',
                        title: 'CP',
                        align:"center",
                        templet: function(d) {
                            var value= d.cp?d.cp:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },

                    }, {
                        field: 'cpk',
                        rowspan: '2',
                        title: 'CPK',
                        align:"center",
                        templet: function(d) {
                            var value= d.cpk?d.cpk:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },

                    }, {
                        field: 'cpkl',
                        rowspan: '2',
                        title: 'CPKL',
                        align:"center",
                        templet: function(d) {
                            var value= d.cpkl?d.cpkl:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                        },

                    }, ],
                    [{
                            field: 'thresholdMax',
                            align:"center",
                            title: '上限值',
                            templet: function(d) {
                             var value= d.thresholdMax?d.thresholdMax:''
                             return '<div title="'+value+'"><span>'+ value +'</span></div>'
                          },

                        }, {
                            field: 'thresholdStandard',
                            align:"center",
                            title: '标准值',
                            templet: function(d) {
                            var value= d.thresholdStandard?d.thresholdStandard:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                          },
                        }, {
                            field: 'thresholdMin',
                            align:"center",
                            title: '下限值',
                           templet: function(d) {
                            var value= d.thresholdMin?d.thresholdMin:''
                            return '<div title="'+value+'"><span>'+ value +'</span></div>'

                          },

                        },

                    ]
                ],
                cellMinWidth: 90,
                page: {
                    layout: ['limit', 'count', 'prev', 'page', 'next', 'skip']
                },
                request: {
                    pageName: 'pageNo',
                    limitName: 'pageSize'
                },
                where: search
            });
        }

        table.on('radio(tableContent-ability)', function(obj){
            //processId=obj.data.id;
            getXbarData(obj.data);

        });

        initFormButtonPadding();

        function initFormButtonPadding() {
            var elem=$('#top-right-from');
            var width=elem.innerWidth();
            //  var inputWidth=$('#top-right-from .input').innerWidth() 还未渲染;
            var spanWidth=$('#top-right-from .layui-form-label').innerWidth();
            var inputWidth=180;
            if (window.innerWidth<1366)
            {
                inputWidth=130
            }
            else if (inputWidth>=1920)
            {
                inputWidth=260;
            }
            var pad=width-inputWidth-spanWidth;
            $('.btn-form').css('padding-right',pad+'px');


        }

        // 初始化，执行一次渲染表格
        renderTable();

        // 表单提交，查询与重置
        form.on('submit(search_ability)', function(data) {
            // 获取表单数据
            var d = data.field;

            if (d.inspectDate) {
                d.startInspectDate = d.inspectDate.split(' - ')[0] + ' 00:00:00';
                d.endInspectDate = d.inspectDate.split(' - ')[1] + ' 23:59:59';
            }
            renderTable(d);
        });

        $('.table-top-bar input').keyup(function(event) {
            if (event.keyCode === 13) {
                $('#search_ability').click();
            }
        });

        //导出
        $('#btn-export').on('click', function() {
            $('#form_export').click();
        });
        //目的是获得表单查询参数（不使用查询参数缓存方式因为可能会出现表单数据变了，没有点击按钮的情况出现）

        form.on('submit(form_export)', function(data) {
            var d = data.field;
            convertToOne();


        })

        // 风险监控导出
        function exportExcel(file) {
            var xhr = new XMLHttpRequest();
            var formData = new FormData();
            formData.append("multipartFiles", file, 'Up');
            xhr.open('POST', admin.formatUrl("/api-edu/interaction/abilitylist/excel/export"), true);
            xhr.responseType = 'blob';
            xhr.onload = function(e) {
                if (this.status == 200) {
                    var blob = this.response;
                    var filename = '工艺管理过程一览.xls';
                    if (window.navigator.msSaveOrOpenBlob) {
                        navigator.msSaveBlob(blob, filename);
                    } else {
                        var a = document.createElement('a');
                        blob.type = "application/excel";
                        var url = URL.createObjectURL(blob);
                        a.href = url;
                        a.download = filename;
                        a.click();
                        window.URL.revokeObjectURL(url);
                    }
                    admin.removeLoading("body");
                }
            };
            xhr.send(formData);
        }

        //将base64转换为文件
        function dataURLtoFile(dataurl) {
            var arr = dataurl.split(','),
                mime = arr[0].match(/:(.*?);/)[1],
                bstr = atob(arr[1]),
                n = bstr.length,
                u8arr = new Uint8Array(n);
            while (n--) {
                u8arr[n] = bstr.charCodeAt(n);
            }
            return new Blob([u8arr], { type: mime });
        }

        // 转换页面上图片为一张
        function convertToOne() {
            var myChartBar = echarts.init(document.getElementById('x-chart'));
            var canvas = document.createElement("canvas");
            canvas.width = 800;
            canvas.height = 600;
            var context = canvas.getContext("2d");
            context.rect(0, 0, canvas.width, canvas.height);
            context.fillStyle = "#fff";
            context.fill();
            var baseBar = myChartBar.getDataURL();
            var imageBar = new Image();
            imageBar.src = baseBar
            setTimeout(function() {
                context.drawImage(imageBar, 0, 0, 600, 600);
                context.clearRect(600, 0, 600, 600)
                var base64Up = canvas.toDataURL("image/png"); //"image/png" 这里注意一下
                var up = dataURLtoFile(base64Up)
                exportExcel(up)
            }, 1000)
        };


        function getXbarData(itemData) {
            var params={processId:itemData.id};
            var inspectDate=$('#inspectDate').val();
            if (inspectDate) {
                params.startInspectDate = inspectDate.split(' - ')[0] + ' 00:00:00';
                params.endInspectDate = inspectDate.split(' - ')[1] + ' 23:59:59';
            }
            admin.req('/api-edu/interaction/abilitylist/Xbar', params, function(res) {
                if (res.ok)
                {
                    var xData=[],yData=[],thresholdMaxData=[],thresholdMinData=[],uclData=[],lclData=[],length=25,allData=[];
                    //规则：无时间=>横坐标显示25个（无论有无），有时间=》根据查询长度来定
                    if (inspectDate!='')
                    {
                         length=res.data.length
                    }

                    for (var i=0;i<length;i++)
                    {

                        xData.push(i);
                        //上公差
                        thresholdMaxData.push(itemData.thresholdMax);
                        //下公差
                        thresholdMinData.push(itemData.thresholdMin);
                        //上控制
                        uclData.push(itemData.ucl);
                        //x下控制
                        lclData.push(itemData.lcl);
                        if (i<res.data.length)
                        {
                            res.data[i].value=res.data[i].avgSample;
                            allData.push(res.data[i].avgSample);
                            yData.push(res.data[i])
                        }

                    }
                    allData.push(itemData.thresholdMin);
                    allData.push(itemData.lcl);
                    var min = Math.min.apply(null, allData);
                    min=Math.floor(min)
                    if (min>=1)
                    {
                        min=min-1;
                    }


                    var chartData={xData:xData,yData:yData,thresholdMaxData:thresholdMaxData,thresholdMinData:thresholdMinData,uclData:uclData,lclData:lclData,yMin:min}
                    setXlineChart(chartData);
                }



            }, {
                method: 'get'
            });

        }

        function setXlineChart(chartData) {
            var option = {
                title: {
                    //text: '折线图堆叠'
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function (params) {
                        console.log(params)
                        var color = params.color;//图例颜色
                        var htmlStr ='<div>';
                        htmlStr += params.data.inspectDate + '<br/>';

                        htmlStr += '<span style="margin-right:5px;display:inline-block;width:10px;height:10px;border-radius:5px;background-color:'+color+';"></span>';

                        //添加一个汉字，这里你可以格式你的数字或者自定义文本内容
                        htmlStr += params.seriesName + '：'+params.data.count + '个';
                        htmlStr += '</div>';
                        return htmlStr;
                    }
                    },
                legend: {
                    data: ['上公差线', '上控制线', ' ', '下公差线', '下控制线'],
                    bottom: 10,
                    width: '700'
                    //left:10
                },
                grid: {
                    left: '3%',
                    //right: '4%',
                    //bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: chartData.xData
                },
                yAxis: {
                    type: 'value',
                    min:chartData.yMin,
                },
                series: [{
                    name: '上公差线',
                    type: 'line',
                    lineStyle: {
                        normal: {
                            color: '#5CA9F8',
                            //width: 4,
                            type: 'solid'
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: '#5CA9F8'
                        }
                    },
                    symbol: 'none',
                    
                    data: chartData.thresholdMaxData,
                }, {
                    name: '上控制线',
                    type: 'line',
                    lineStyle: {
                        normal: {
                            color: '#5CA9F8',
                            type: 'dashed'
                        }
                    },
                    itemStyle: {
                        normal: {
                            //borderWidth: 3,
                            //borderColor: 'yellow',
                            color: '#5CA9F8'
                        }
                    },
                    symbol: 'none',
                    
                    data: chartData.uclData
                }, {
                    name: '',
                    type: 'line',
                    lineStyle: {
                        normal: {
                            color: '#061745',
                            //width: 4,
                            type: 'solid'
                        }
                    },
                    symbol: 'circle',
                    itemStyle: {
                        normal: {
                            //borderWidth: 3,
                            //borderColor: 'yellow',
                            color: '#061745'
                        }
                    },
                    data: chartData.yData
                }, {
                    name: '下公差线',
                    type: 'line',
                    lineStyle: {
                        normal: {
                            color: '#F85C60',
                            //width: 4,
                            type: 'solid'
                        }
                    },
                    itemStyle: {
                        normal: {
                            //borderWidth: 3,
                            //borderColor: 'yellow',
                            color: '#F85C60'
                        }
                    },
                    symbol: 'none',
                    
                    data: chartData.thresholdMinData
                }, {
                    name: '下控制线',
                    type: 'line',
                    lineStyle: {
                        normal: {
                            color: '#F85C60',
                            //width: 4,
                            type: 'dashed'
                        }
                    },
                    itemStyle: {
                        normal: {
                            //borderWidth: 3,
                            //borderColor: 'yellow',
                            color: '#F85C60'
                        }
                    },
                    symbol: 'none',
                    
                    data: chartData.lclData
                }]
            };
            drawCharts('x-chart', option);

        }


        //图表配置项
        var myChartOption = {
            title: {
                //text: '折线图堆叠'
            },
            tooltip: {
                show: false
                    //trigger: 'axis'
            },
            legend: {
                data: ['上公差线', '上控制线', ' ', '下公差线', '下控制线'],
                bottom: 10,
                width: '700'
                    //left:10
            },
            grid: {
                left: '3%',
                //right: '4%',
                //bottom: '3%',
                containLabel: true
            },
            toolbox: {
                /*feature: {
                    saveAsImage: {}
                }*/
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['1', '2', '3', '4', '5', '6', '7']
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                name: '上公差线',
                type: 'line',
                lineStyle: {
                    normal: {
                        color: '#5CA9F8',
                        //width: 4,
                        type: 'solid'
                    }
                },
                itemStyle: {
                    normal: {
                        //borderWidth: 3,
                        //borderColor: 'yellow',
                        color: '#5CA9F8'
                    }
                },
                symbol: 'none',
                
                data: [0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04]
            }, {
                name: '上控制线',
                type: 'line',
                lineStyle: {
                    normal: {
                        color: '#5CA9F8',
                        //width: 4,
                        type: 'dashed'
                    }
                },
                itemStyle: {
                    normal: {
                        //borderWidth: 3,
                        //borderColor: 'yellow',
                        color: '#5CA9F8'
                    }
                },
                symbol: 'none',
                
                data: [0.036, 0.036, 0.036, 0.036, 0.036, 0.036, 0.036]
            }, {
                name: '',
                type: 'line',
                lineStyle: {
                    normal: {
                        color: '#061745',
                        //width: 4,
                        type: 'solid'
                    }
                },
                symbol: 'circle',
                itemStyle: {
                    normal: {
                        //borderWidth: 3,
                        //borderColor: 'yellow',
                        color: '#061745'
                    }
                },
                
                data: [0.021, 0.023, 0.018, 0.024, 0.017, 0.025, 0.03]
            }, {
                name: '下公差线',
                type: 'line',
                lineStyle: {
                    normal: {
                        color: '#F85C60',
                        //width: 4,
                        type: 'solid'
                    }
                },
                itemStyle: {
                    normal: {
                        //borderWidth: 3,
                        //borderColor: 'yellow',
                        color: '#F85C60'
                    }
                },
                symbol: 'none',
                
                data: [0.006, 0.006, 0.006, 0.006, 0.006, 0.006, 0.006]
            }, {
                name: '下控制线',
                type: 'line',
                lineStyle: {
                    normal: {
                        color: '#F85C60',
                        //width: 4,
                        type: 'dashed'
                    }
                },
                itemStyle: {
                    normal: {
                        //borderWidth: 3,
                        //borderColor: 'yellow',
                        color: '#F85C60'
                    }
                },
                symbol: 'none',
                
                data: [0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01]
            }]
        };
        drawCharts('r-chart', myChartOption);

        function drawCharts(elem, option) {
            var myChart = echarts.init(document.getElementById(elem));
            myChart.setOption(option);
        }

        form.on('submit(reset_ability)', function(data) {
            reset();
        });

        // 重置查询表单
        function reset() {
            $('.table-top-bar input').val('');

            renderTable();
        }

    });
</script>