<!--1920X1080-->
<style>
    body,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    ul,
    ol,
    li,
    input,
    select,
    button,
    p {
        margin: 0;
        padding: 0;
    }

    html,
    body {
        height: 100%;
        color: #FFFFFF;
        font-family: "微软雅黑";
    }

    ul {
        list-style: none;
    }

    ul li {
        float: left;
    }

    a {
        text-decoration: none;
    }

    /* a:hover {
        color: #FFFFFF;
    } */

    ul li a {
        color: #FFFFFF
    }

    .content {
        width: 100%;
        position: absolute;
        top: 95px;
        bottom: 0;
        /*background: url("./assets/images/datashow/bg-jiaohu.png") no-repeat;
        background-size: 100%;*/
    }

    .content-header {
        height: 44px;
        background: url("../../assets/images/datashow/content-header-bg.png");
        background-size: 100% 100%;
        font-size: 16px;
    }

    .content-header-tab {
        overflow: hidden;
        width: 45%;
        height: 44px;
        line-height: 36px;
        margin: 0 auto;
        font-weight: bold;
    }

    ul.content-header-tab li {
        width: 25%;
        text-align: center;
        cursor: pointer;
        color: #FFFFFF;
        font-size: 18px;
    }

    ul.content-header-tab li:hover {
        color: #FFFFFF
    }

    .content-body {
        position: absolute;
        top: 36px;
        bottom: 0;
        width: 100%;
    }

    .content-body-left {
        float: left;
    }

    .content-body-right {
        float: right;
    }

    .content-body-left,
    .content-body-right {
        width: 26%;
        height: 100%;
    }

    .content-body-center {
        height: 100%;
    }

    .search,
    .export {
        height: 7%;
        display: flex;
        /*justify-content: center;*/
        align-items: center;
        padding-left: 5%;
    }

    .pie-left,
    .pie-right {
        margin-top: 3%;
    }

    #bar-left-chart {
        width: 100%;
        height: 78%;
        margin: 0 auto;
    }

    #bar-right-chart {
        width: 100%;
        height: 63%;
        margin: 0 auto;
        padding: 0 3%;
        box-sizing: border-box;
        text-align: center;
    }

    .bottom-legend {
        width: 90%;
        height: 7%;
        margin: 0 auto;
        font-size: 12px;
        /*padding-top: 1.5%;*/
    }

    .bottom-legend>ul>li {
        width: 25%;
    }

    .bottom-legend>ul>li>div {
        vertical-align: middle;
    }

    .bottom-legend-words {
        opacity: 0.6;
    }

    #pie-left-chart {
        width: 100%;
        height: 100%;
        margin: 0 auto;
    }

    #pie-right-chart {
        width: 100%;
        height: 78%;
        margin: 0 auto;
    }

    .layui-layout-admin .layui-body {
        bottom: 0 !important;
    }

    @media screen and (max-width: 1900px) and (min-width: 1360px) {
        #main {
            width: 44%;
            height: 70%;
            margin: 0 auto;
            top: 8%;
            left: 28%;
            background: url(../../assets/images/bigQ2.png) no-repeat center 52% fixed;
            background-size: 30%;
        }

        #main1 {
            width: 50%;
            height: 70%;
            margin: 0 auto;
            top: 3%;
            left: 27.2%;
        }

        .search {
            height: 8%;
            margin-right: -6%;
        }

        #info-list {
            font-size: 12px;
            width: 100%;
            height: 57%;
            overflow-y: scroll;
            scrollbar-track-color: #3C5984;
            scrollbar-arrow-color: #3C5984;
            scrollbar-face-color: #3C5984;
            scrollbar-shadow-color: #3C5984;
        }

        .bar-title {
            font-size: 18px
        }

        .map-title {
            font-size: 18px;
        }

        .mouthmouth {
            position: absolute;
            margin: 102px 0 0 158px;
        }

        .bar-title-2nd,
        .pie-title-2nd {
            font-size: 14px;
            padding: 1% 4%;
            text-align: right;
        }

        .bottom-words {
            height: 20%;
            margin-top: 2.7%;
            margin-left: 0;
            font-size: 13px;
        }

        .bottom-words-detail {
            color: #40EFFF;
            float: left;
            width: 50%;
            margin-left: 3%;
        }

        .bottom-words-detail>div {
            margin-top: 3%;
        }

        .bottom-words-detail>div>span {
            background: rgba(0, 205, 254, 0.1);
            border-bottom: 1px solid #40EFFF;
            padding: 2px;
        }

        .top-words {
            color: #B9F4FF;
            font-size: 12px;
            margin-top: 2.5%;
            margin-left: 3%;
            height: 9%;
        }

        .calendar {
            height: 55%;
        }

        .legend {
            height: 100%;
            width: 19%;
            float: right;
            margin-top: 1.5%;
            font-size: 12px;
        }
    }

    @media screen and (min-width: 1910px) {
        #main {
            width: 44%;
            height: 66%;
            margin: 0 auto;
            top: 8%;
            left: 28%;
            background: url(../../assets/images/bigQ2.png) no-repeat center 60% fixed;
            background-size: 28%;
        }

        #main1 {
            width: 50%;
            height: 70%;
            margin: 0 auto;
            top: 36%;
            left: 29.5%;
        }

        #main1 img {
            width: 36px;
            height: 36px;
        }

        .mouthmouth {
            position: absolute;
            margin: 78px 0 0 185px;
        }

        #img02 {
            margin-left: 103px !important;
        }

        #img03 {
            margin-left: 124px !important;
        }

        #img04 {
            margin-left: 146px !important;
        }

        #img05 {
            margin-left: 166px !important;
        }

        #img06 {
            margin-left: 186px !important;
        }

        #img07 {
            margin-left: 206px !important;
        }

        #img08 {
            margin-left: 226px !important;
        }

        #img09 {
            margin-left: 248px !important;
        }

        #img10 {
            margin-left: 268px !important;
        }

        #img11 {
            margin-left: 290px !important;
        }

        #img12 {
            margin: 140px 0 0 103px !important;
        }

        #img13 {
            margin: 138px 0px 0 122px !important
        }

        #img14 {
            margin: 138px 0px 0 143px !important
        }

        #img15 {
            margin: 138px 0px 0 163px !important
        }

        #img16 {
            margin: 138px 0px 0 183px !important
        }

        #img17 {
            margin: 138px 0px 0 205px !important
        }

        #img18 {
            margin: 138px 0px 0 226px !important
        }

        #img19 {
            margin: 138px 0px 0 247px !important
        }

        #img20 {
            margin: 138px 0px 0 268px !important
        }

        #img21 {
            margin: 103px 0 0 124px !important;
        }

        #img22 {
            margin: 103px 0 0 144px !important;
        }

        #img23 {
            margin: 103px 0 0 166px !important;
        }

        #img24 {
            margin: 103px 0 0 186px !important;
        }

        #img25 {
            margin: 103px 0 0 206px !important;
        }

        #img26 {
            margin: 103px 0 0 228px !important;
        }

        #img27 {
            margin: 103px 0 0 248px !important;
        }

        #img28 {
            margin: 32px 0 0 165px !important;
        }

        #img29 {
            margin: 32px 0 0 186px !important;
        }

        #img30 {
            margin: 32px 0 0 207px !important;
        }

        #img31 {
            margin: -5px 0 0 186px !important;
        }

        #div01 {
            margin: 188px 0 0 95px !important;
        }

        #div02 {
            margin: 180px 0 0 117px !important;
        }

        #div03 {
            margin: 188px 0 0 138px !important;
        }

        #div04 {
            margin: 180px 0 0 160px !important;
        }

        #div05 {
            margin: 188px 0 0 180px !important;
        }

        #div06 {
            margin: 180px 0 0 200px !important;
        }

        #div07 {
            margin: 188px 0 0 220px !important;
        }

        #div08 {
            margin: 180px 0 0 240px !important;
        }

        #div09 {
            margin: 188px 0 0 260px !important;
        }

        #div10 {
            margin: 180px 0 0 280px !important;
        }

        #div11 {
            margin: 188px 0 0 300px !important;
        }

        #div12 {
            margin: 155px 0 0 113px !important;
        }

        #div13 {
            margin: 144px 0 0 132px !important;
        }

        #div14 {
            margin: 155px 0 0 154px !important;
        }

        #div15 {
            margin: 144px 0 0 173px !important;
        }

        #div16 {
            margin: 155px 0 0 193px !important;
        }

        #div17 {
            margin: 144px 0 0 215px !important;
        }

        #div18 {
            margin: 155px 0 0 235px !important;
        }

        #div19 {
            margin: 144px 0 0 256px !important;
        }

        #div20 {
            margin: 155px 0 0 278px !important;
        }

        #div21 {
            margin: 117px 0 0 135px !important;
        }

        #div22 {
            margin: 106px 0 0 154px !important;
        }

        #div23 {
            margin: 117px 0 0 176px !important;
        }

        #div24 {
            margin: 106px 0 0 196px !important;
        }

        #div25 {
            margin: 117px 0 0 216px !important;
        }

        #div26 {
            margin: 106px 0 0 238px !important;
        }

        #div27 {
            margin: 117px 0 0 258px !important;
        }

        #div28 {
            margin: 47px 0 0 176px !important;
        }

        #div29 {
            margin: 36px 0 0 197px !important;
        }

        #div30 {
            margin: 47px 0 0 217px !important;
        }

        #div31 {
            margin: 10px 0 0 197px !important;
        }

        .search {
            height: 8%;
            /*margin-right: -18%;*/
        }

        #info-list {
            font-size: 12px;
            width: 100%;
            height: 50%;
            overflow-y: scroll;
            scrollbar-track-color: #3C5984;
            scrollbar-arrow-color: #3C5984;
            scrollbar-face-color: #3C5984;
            scrollbar-shadow-color: #3C5984;
        }

        .bar-title {
            font-size: 14px
        }

        .map-title {
            font-size: 16px;
        }

        .bar-title-2nd,
        .pie-title-2nd {
            font-size: 12px;
            padding: 3% 4%;
            text-align: right;
        }

        .bottom-words {
            height: 20%;
            margin-top: 0;
            margin-left: 0;
            font-size: 12px;
            color: #40EFFF;
        }

        .bottom-words-detail>div {
            margin-top: 4%;
        }

        .top-words {
            color: #B9F4FF;
            font-size: 12px;
            margin-top: 7.5%;
            margin-left: 3%;
            height: 9%;
        }

        .calendar {
            height: 55%;
        }

        .legend {
            height: 100%;
            width: 19%;
            float: right;
            margin-top: 0;
            font-size: 12px;
        }
    }

    .export {
        padding-right: 5%;
        justify-content: flex-end;
        padding-left: 0;
        height: 8%;
        position: relative;
    }

    .span-support {
        position: absolute;
        bottom: 10%;
    }

    .bar-right,
    .pie-right {
        margin-right: 5%;
        margin-left: 0;
    }

    .map-title {
        width: 42%;
        height: 5.4%;
        left: 29%;
        top: 5.5%;
        position: absolute;
        display: flex;
        justify-content: space-between;
        color: #40EFFF;
        /*font-size: 18px;*/
        background: rgba(0, 186, 254, 0.3);
        border-radius: 4px 4px 0 0;
    }

    .map-title-text {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .map-title-text1 {
        position: absolute;
        right: 0;
        line-height: 28px;
    }

    .contruy1 {
        cursor: pointer;
        font-size: 14px;
        justify-content: center;
    }

    .contruy,
    .province,
    .city {
        cursor: pointer;
    }

    /* .layui-table-view .layui-table {
        width: 100%;
    } */

    .layui-laydate-main {
        /* width: 205px !important;
        height: 230px; */
    }

    #bar-right-chart .laydate-month-list>li {
        margin: 8px 0 !important;
    }

    input::-webkit-input-placeholder {
        /* WebKit browsers */
        color: rgba(255, 255, 255, 0.5);
    }

    input:-moz-placeholder {
        /* Mozilla Firefox 4 to 18 */
        color: rgba(255, 255, 255, 0.5);
    }

    input::-moz-placeholder {
        /* Mozilla Firefox 19+ */
        color: rgba(255, 255, 255, 0.5);
    }

    input:-ms-input-placeholder {
        /* Internet Explorer 10+ */
        color: rgba(255, 255, 255, 0.5);
    }

    .table-control-btn {
        color: #2487DA;
        font-size: 12px;
        margin-right: 10px;
        cursor: pointer;
    }

    .table-control-btn:hover {
        color: #2487DA;
    }

    /* 加skin皮肤样式 */

    .whiteStyle .layui-layer-title {
        background: #FFF;
        color: #000;
        font-size: 16px;
        border: none;
    }

    .layui-title-text {
        font-weight: 600;
    }

    /* 日期选择控件中的确定按钮样式 */

    .layui-laydate .laydate-btns-confirm {
        background-color: #1890FF;
        color: white;
    }

    .layui-laydate .laydate-btns-confirm:hover {
        opacity: 0.7;
        color: white;
    }

    .layui-table-view .layui-table td,
    .layui-table-view .layui-table th {
        padding: 2px 0;
    }

    /* 风险信息详情表格主体的最高高度 */

    .layui-table-body {
        min-height: calc(100% - 30px);
        border-color: #075B97 !important;
        overflow-y: hidden;
    }

    .layui-table-body tr:nth-child(2n) {
        background-color: transparent;
    }

    .layui-table-body tr:nth-child(2n+1) {
        background-color: transparent;
    }

    /* 无数据显示图片 */

    .nodatastyle {
        background: url("../../assets/images/nodatatransparent.png") no-repeat center 44px;
        background-size: 23%;
    }

    .layui-table,
    .layui-table-view {
        margin: 0 0;
        height: 100%;
    }

    .layui-card-body {
        padding: 10px 10px;
    }

    /*****************************公共部分样式*********************************/
    /************************重写layui部分样式*********************************/

    .layui-layout-admin .layui-body {
        top: 0;
        padding: 0;
        overflow-y: auto;
    }

    .layui-table {
        background: rgba(11, 73, 159, 0.4);
        color: #40EFFF;
    }

    .layui-table tbody tr:hover,
    .layui-table thead tr,
    .layui-table-click,
    .layui-table-header,
    .layui-table-hover,
    .layui-table-mend,
    .layui-table-patch,
    .layui-table-tool,
    .layui-table-total,
    .layui-table-total tr,
    .layui-table[lay-even] tr:nth-child(even) {
        background-color: #075B97 !important;
    }

    .layui-table td,
    .layui-table th,
    .layui-table-col-set,
    .layui-table-fixed-r,
    .layui-table-grid-down,
    .layui-table-header,
    .layui-table-page,
    .layui-table-tips-main,
    .layui-table-tool,
    .layui-table-total,
    .layui-table-view,
    .layui-table[lay-skin=line],
    .layui-table[lay-skin=row] {
        border-color: rgba(0, 186, 254, 0.3) !important;
    }

    /* .layui-table-header tr:nth-child(2n+1) {
    background-color: #E9F9FF !important;
    } */

    .layui-table-box {
        border-color: rgba(0, 186, 254, 0.3);
        height: 100%;
    }

    .layui-table>thead {
        background: none;
        color: #FFF;
    }

    #bar-right-chart .layui-laydate-content {
        padding: 0;
        height: 100%;
    }

    #bar-right-chart .layui-laydate-content table {
        height: 100%;
        width: 100%;
    }

    #bar-right-chart .layui-laydate-content>table>thead {
        display: none;
    }

    #bar-right-chart .layui-laydate-main {
        width: auto !important;
        height: 100%;
    }

    #bar-right-chart .layui-laydate-content td,
    .layui-laydate-content th {
        width: 52px;
        padding: 1px;
        height: 20px;
    }

    #bar-right-chart .layui-laydate {
        font-size: 12px;
        width: 97%;
        height: 95%;
    }

    #bar-right-chart .laydate-theme-grid .laydate-month-list>li,
    .laydate-theme-grid .laydate-year-list>li,
    .laydate-theme-grid .layui-laydate-content td,
    .laydate-theme-grid .layui-laydate-content thead,
    .laydate-theme-molv .layui-laydate-footer {
        border: 1px solid rgba(73, 220, 255, 0.5);
    }

    #bar-right-chart .layui-laydate-content .laydate-day-next,
    #bar-right-chart .layui-laydate-content .laydate-day-prev {
        color: rgba(0, 0, 0, 0) !important;
    }

    #bar-right-chart .layui-laydate-content td {
        color: #FFF;
    }

    #bar-right-chart .layui-laydate,
    #bar-right-chart .layui-laydate-hint {
        background: rgba(43, 84, 127, 0.5);
        border: none;
    }

    #bar-right-chart .layui-laydate-content td:hover,
    #bar-right-chart .layui-laydate-list li:hover {
        background-color: rgba(11, 73, 159, 1);
        color: #FFF;
    }

    #bar-right-chart .laydate-day-mark {
        line-height: 22px;
    }

    .laydate-day-mark::after {
        position: absolute;
        content: '';
        left: 0;
        top: 0;
        border-top: 10px solid #1DD41D;
        border-right: 10px solid transparent;
        width: 0;
        height: 0;
        border-radius: 0;
        background-color: rgba(0, 0, 0, 0) !important;
    }

    /*****************************查询样式************************************/

    .search-input {
        width: 28%;
        height: 40%;
        background: rgba(73, 220, 255, 0.17);
        /*background-size: 100% 100%;*/
        border: 1px solid #00FFFF;
        color: #FFFFFF;
        padding-left: 5px;
        margin: 0 5px;
    }

    .search-button,
    #export {
        height: 58%;
        margin: 0 1%;
        width: 10%;
        background: url("../../assets/images/datashow/50_40.png") no-repeat;
        background-size: 100% 100%;
        border: none;
        color: #9BE3F9;
        cursor: pointer;
    }

    .select-button {
        border: none;
        background: none;
        color: #FFF;
        cursor: pointer;
        width: 48px;
        opacity: 0.6;
    }

    .search>label {
        width: 45px;
    }

    /*****************************图表样式************************************/

    .bar-title,
    .pie-title {
        text-align: center;
        height: 16%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 186, 254, 0.3);
        border-radius: 4px 4px 0px 0px;
        color: #40EFFF;
    }

    #ppmstatus .bar-title1 {
        text-align: center;
        height: 16%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 186, 254, 0.3);
        border-radius: 4px 4px 0px 0px;
        color: #40EFFF;
    }

    #ppmstatus .bar-title2 {
        text-align: right;
        height: 16%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 186, 254, 0.3);
        border-radius: 4px 4px 0px 0px;
        color: #40EFFF;
    }

    .title-span {
        margin-right: 2%;
        font-size: 12px;
        color: #949494;
        margin-top: 2px;
    }

    .bar-left,
    .pie-left,
    .bar-right,
    .pie-right {
        margin-left: 5%;
        box-sizing: border-box;
        background: rgba(11, 73, 159, 0.4);
        border-radius: 4px;
        color: #FFFFFF;
        height: 44%;
        overflow: hidden;
    }

    .pie-right {
        background: none;
    }

    /*****************************列表样式************************************/

    .layui-table-body::-webkit-scrollbar {
        /*滚动条整体样式*/
        width: 10px;
        /*高宽分别对应横竖滚动条的尺寸*/
        height: 1px;
    }

    .layui-table-body::-webkit-scrollbar-thumb {
        /*滚动条里面小方块*/
        background: rgba(255, 255, 255, 0.2);
    }

    .layui-table-body::-webkit-scrollbar-track {
        /*滚动条里面轨道*/
        display: none;
    }

    .layui-table-body::-webkit-scrollbar-corner {
        /*滚动条边角*/
        display: none;
    }

    /*****************************中心样式************************************/

    .legend>ul>li {
        margin: 3%;
        width: 100%;
    }

    .bottom-words-detail {
        color: #40EFFF;
        float: left;
        width: 50%;
        margin-left: 3%;
    }

    .legend>ul>li>span {
        opacity: 0.6;
        margin-top: -3px;
        display: inherit;
    }

    .bottom-words-detail>div>span {
        background: rgba(0, 205, 254, 0.1);
        border-bottom: 1px solid #40EFFF;
        padding: 2px;
    }

    .trancle1 {
        width: 0;
        height: 0;
        border-bottom: 12px solid #00FF00;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        float: left;
        margin-right: 6%;
    }

    .trancle2 {
        width: 0;
        height: 0;
        border-bottom: 12px solid #D6B939;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        float: left;
        margin-right: 6%;
    }

    .trancle3 {
        width: 0;
        height: 0;
        border-bottom: 12px solid #FF6349;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        float: left;
        margin-right: 6%;
    }

    .trancle4 {
        width: 0;
        height: 0;
        border-top: 10px solid #1DD41D;
        border-right: 10px solid transparent;
        float: left;
        margin-right: 6%;
    }

    .trancle5 {
        width: 0;
        height: 0;
        border-top: 10px solid #D6B939;
        border-right: 10px solid transparent;
        float: left;
        margin-right: 6%;
    }

    .trancle7 {
        width: 0;
        height: 0;
        border-top: 10px solid #0000FF;
        border-right: 10px solid transparent;
        float: left;
        margin-right: 6%;
    }

    .trancle6 {
        width: 0;
        height: 0;
        border-top: 10px solid #FF6349;
        border-right: 10px solid transparent;
        float: left;
        margin-right: 6%;
    }

    .content-tail-center {
        width: 45%;
        height: 24.1%;
        left: 50%;
        transform: translateX(-50%);
        top: 74%;
        position: absolute;
        border-radius: 4px;
        overflow: hidden;
    }

    /*for temporary use*/

    .layui-body {
        background: url(../../assets/images/datashow/bg-jiaohu.png) no-repeat;
        background-size: 100%;
    }

    #bar-right-chart .layui-laydate-header {
        display: none;
    }

    .layui-layer-content {
        color: #000;
    }

    .layui-layer-msg .layui-layer-content {
        color: #fff;
    }

    #outsideProblems,
    #insideProblems {
        cursor: pointer;
    }

    .layui-table td {
        position: unset;
    }

    @media screen and (max-height: 800px) and (min-height: 700px) {
        #main1 {
            margin: 52px 0 0 -34px !important;
        }

        .top-words {
            margin-top: 5%;
        }
    }

    @media screen and (max-height: 1080px) and (min-height: 1000px) {
        #main1 {
            margin: 32px 0 0 -33px !important;
        }
    }
</style>
<div
    style="width: 100%;height: 42px;color: #FFF;position: absolute;top: 56px;font-size: 18px;font-weight: 600;background-color: rgba(58,146,255,0.3)">
    <ul style="display: flex;justify-content: space-around;align-items: center;height: 100%;" id="mainHeader">
        <li style="color: #49DCFF">工厂总览</li>
        <li><a href="/edu/fx/projectMgt">项目管理</a></li>
        <li><a href="/html-edu/index.html#!product_index">生产管理</a></li>
        <li><a href="/html-edu/index.html#!quality_unqualified">质量管理</a></li>
        <li><a href="/edu/llManage/indexIn">交付管理</a></li>
        <li><a href="/edu/fx/modifiView">变更管理</a></li>
        <li><a href="/html-edu/index.html#!riskManage_riskIndex">风险管理</a></li>
        <li><a href="/edu/classfield">基础档案</a></li>
    </ul>
</div>
<div class="content">
    <div class="content-header">
        <!-- tab -->
        <ul class="content-header-tab" id="subHeader">
            <li><a href="./indexChart.html#!factoryPandect">工厂运行总览</a></li>
            <li id="analysis"><a href="./indexChart.html#!productStatus">生产运行状态</a></li>
            <li id="monitor"><a href="./indexChart.html#!qualityStatus" style="color: #40EFFF;">质量运行状态</a></li>
            <li id="warning"><a href="./indexChart.html#!deliveryStatus">交付完成状态</a></li>
        </ul>
    </div>
    <!-- tab内容 -->
    <div class="content-body">
        <div class="content-body-left">
            <!-- 查询框 -->
            <div class="search">
                <label>时间段</label>
                <input type="text" class="search-input" id="search-input" readonly autocomplete="off"
                    placeholder="请选择日期">
                <span>-</span>
                <input type="text" class="search-input" id="search-input2" readonly autocomplete="off"
                    placeholder="请选择日期">
                <button class="search-button">查询</button>
            </div>
            <!-- 图表 -->
            <div class="bar-left">
                <div class="bar-title">一次交检合格率</div>
                <div class="bar-title-2nd">
                    <span id='passtarget' class="title-span">目标值：0%</span>
                </div>
                <div id="bar-left-chart"></div>
            </div>
            <!-- 图表 -->
            <div class="pie-left">
                <div class="bar-title">
                    <div style='margin: 25%;'>PPM状态</div>
                    <div id='ppmstatus' style="font-size: 13px; margin: -13%;"></div>
                </div>
                <!-- <div class="pie-title-2nd">
                    <span id='ppmtarget' class="title-span">目标值：0%</span>
                </div> -->
                <div id="pie-left-chart"></div>
            </div>
        </div>
        <!--底部表格-->
        <div class="content-tail-center">
            <table id="dateTimeTable2"></table>
        </div>
        <div class="content-body-right">
            <!-- 导出 -->
            <div class="export">
                <div class="span-support">
                    <span id=newdate>无</span>
                    <span style="font-size: 12px;">（最近更新日期）</span>
                </div>
            </div>
            <!-- 图表 -->
            <div class="bar-right" style="margin-left: 0;">
                <div class="bar-title">风险预警日历</div>
                <div class="bar-title-2nd">
                    <span id='today' class="title-span">2019年01月</span>
                </div>
                <div id="bar-right-chart">

                </div>
                <div class="bottom-legend">
                    <ul>
                        <li>
                            <div class="trancle4"></div>
                            <div class="bottom-legend-words">无风险预警</div>
                        </li>
                        <li>
                            <div class="trancle7"></div>
                            <div class="bottom-legend-words">低风险预警</div>
                        </li>
                        <li>
                            <div class="trancle5"></div>
                            <div class="bottom-legend-words">中风险预警</div>
                        </li>
                        <li>
                            <div class="trancle6"></div>
                            <div class="bottom-legend-words">高风险预警</div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- 图表 -->
            <div class="pie-right" style="margin-left: 0;">
                <!--<div class="bar-title">风险预警日历</div>
                <div id="pie-right-chart"></div>-->
                <table id="dateTimeTable"></table>
            </div>
        </div>
        <!-- 地图 -->
        <div class="content-body-center">
            <div class="map-title">
                <div class="map-title-text" style="width:100%;top:5.5%;left:31%">
                    <div class="contruy">零缺陷质量</div>
                </div>
                <div class="map-title-text1">
                    <div class="contruy1" id="qualitydate"></div>
                </div>
            </div>
        </div>
        <!-- 中心日历 -->
        <div id='main' style="position: absolute;z-index: 99999;">
            <div class="top-words">
                <div id='inside'>内部质量：零缺陷0天，当年不良累计0件，累计报废0件</div>
                <div id='outside'>当年 SGMW质量反馈：现场质量问题0起；DT质量停线0分钟；重大质量问题0起。</div>
            </div>
            <div class="calendar"></div>
            <div id='main1' style="position: absolute;font-size:12px;z-index: 99999;margin:5px 0 0 -34px;">
                <img id="img01" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 80px;" />
                <img id="img02" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 94px;" />
                <img id="img03" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 108px;" />
                <img id="img04" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 124px;" />
                <img id="img05" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 140px;" />
                <img id="img06" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 154px;" />
                <img id="img07" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 168px;" />
                <img id="img08" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 182px;" />
                <img id="img09" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 198px;" />
                <img id="img10" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 214px;" />
                <img id="img11" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:175px 0 0 228px;" />


                <img id="img12" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:151px 0 0 95px;" />
                <img id="img13" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:149px 0 0 108px;" />
                <img id="img14" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:151px 0 0 123px;" />
                <img id="img15" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:149px 0 0 139px;" />
                <img id="img16" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:151px 0 0 154px;" />
                <img id="img17" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:149px 0 0 167px;" />
                <img id="img18" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:151px 0 0 183px;" />
                <img id="img19" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:149px 0 0 199px;" />
                <img id="img20" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:151px 0 0 212px;" />

                <div class='mouthmouth'><span id="month">无</span></div>
                <img id="img21" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:126px 0 0 110px;" />
                <img id="img22" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:123px 0 0 124px;" />
                <img id="img23" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:126px 0 0 138px;" />
                <img id="img24" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:123px 0 0 152px;" />
                <img id="img25" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:125px 0 0 168px;" />
                <img id="img26" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:123px 0 0 184px;" />
                <img id="img27" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:126px 0 0 198px;" />


                <img id="img28" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:75px 0 0 139px;" />
                <img id="img29" src="../../assets/images/triangle/-s-组 39.png" width="28" height="24"
                    style="position:absolute; margin:74px 0 0 154px;" />
                <img id="img30" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:75px 0 0 168px;" />

                <img id="img31" src="../../assets/images/triangle/-s-组 42.png" width="28" height="24"
                    style="position:absolute; margin:50px 0 0 154px;" />
                <div id="div01" style="position:absolute; font-size:12px;margin:183px 0 0 90px;width: 20;height:16">
                    <span style="font-size:1px">1</span></div>
                <div id="div02" style="position:absolute; font-size:12px;margin:174px 0 0 103px;width: 20;height:16">
                    <span class="sizenum">2</span></div>
                <div id="div03" style="position:absolute; font-size:12px;margin:183px 0 0 118px;width: 28;height:24">
                    <span class="sizenum">3</span></div>
                <div id="div04" style="position:absolute; font-size:12px;margin:174px 0 0 134px;width: 28;height:24">
                    <span class="sizenum">4</span></div>
                <div id="div05" style="position:absolute; font-size:12px;margin:183px 0 0 149px;width: 28;height:24">
                    <span class="sizenum">5</span></div>
                <div id="div06" style="position:absolute; font-size:12px;margin:174px 0 0 164px;width: 28;height:24">
                    <span class="sizenum">6</span></div>
                <div id="div07" style="position:absolute; font-size:12px;margin:183px 0 0 177px;width: 28;height:24">
                    <span class="sizenum">7</span></div>
                <div id="div08" style="position:absolute; font-size:12px;margin:174px 0 0 192px;width: 28;height:24">
                    <span class="sizenum">8</span></div>
                <div id="div09" style="position:absolute; font-size:12px;margin:183px 0 0 208px;width: 28;height:24">
                    <span class="sizenum">9</span></div>
                <div id="div10" style="position:absolute; font-size:12px;margin:174px 0 0 220px;width: 28;height:24">
                    <span class="sizenum">10</span></div>
                <div id="div11" style="position:absolute; font-size:12px;margin:183px 0 0 235px;width: 28;height:24">
                    <span class="sizenum">11</span></div>


                <div id="div12" style="position:absolute; font-size:12px;margin:160px 0 0 100px;width: 28;height:24">
                    <span class="sizenum">12</span></div>
                <div id="div13" style="position:absolute; font-size:12px;margin:148px 0 0 115px;width: 28;height:24">
                    <span class="sizenum">13</span></div>
                <div id="div14" style="position:absolute; font-size:12px;margin:160px 0 0 128px;width: 28;height:24">
                    <span class="sizenum">14</span></div>
                <div id="div15" style="position:absolute; font-size:12px;margin:148px 0 0 145px;width: 28;height:24">
                    <span class="sizenum">15</span></div>
                <div id="div16" style="position:absolute; font-size:12px;margin:160px 0 0 159px;width: 28;height:24">
                    <span class="sizenum">16</span></div>
                <div id="div17" style="position:absolute; font-size:12px;margin:148px 0 0 174px;width: 28;height:24">
                    <span class="sizenum">17</span></div>
                <div id="div18" style="position:absolute; font-size:12px;margin:160px 0 0 190px;width: 28;height:24">
                    <span class="sizenum">18</span></div>
                <div id="div19" style="position:absolute; font-size:12px;margin:148px 0 0 206px;width: 28;height:24">
                    <span class="sizenum">19</span></div>
                <div id="div20" style="position:absolute; font-size:12px;margin:160px 0 0 217px;width: 28;height:24">
                    <span class="sizenum">20</span></div>


                <div id="div21" style="position:absolute; font-size:12px;margin:134px 0 0 115px;width: 28;height:24">
                    <span class="sizenum">21</span></div>
                <div id="div22" style="position:absolute; font-size:12px;margin:120px 0 0 128px;width: 28;height:24">
                    <span class="sizenum">22</span></div>
                <div id="div23" style="position:absolute; font-size:12px;margin:134px 0 0 143px;width: 28;height:24">
                    <span class="sizenum">23</span></div>
                <div id="div24" style="position:absolute; font-size:12px;margin:120px 0 0 158px;width: 28;height:24">
                    <span class="sizenum">24</span></div>
                <div id="div25" style="position:absolute; font-size:12px;margin:134px 0 0 174px;width: 28;height:24">
                    <span class="sizenum">25</span></div>
                <div id="div26" style="position:absolute; font-size:12px;margin:120px 0 0 190px;width: 28;height:24">
                    <span class="sizenum">26</span></div>
                <div id="div27" style="position:absolute; font-size:12px;margin:134px 0 0 204px;width: 28;height:24">
                    <span class="sizenum">27</span></div>

                <div id="div28" style="position:absolute; font-size:12px;margin:85px 0 0 144px;width: 28;height:24">
                    <span id="text28" class="sizenum">28</span>
                </div>
                <div id="div29" style="position:absolute; font-size:12px;margin:72px 0 0 160px;width: 28;height:24">
                    <span id="text29" class="sizenum">29</span>
                </div>
                <div id="div30" style="position:absolute; font-size:12px;margin:85px 0 0 174px;width: 28;height:24">
                    <span id="text30" class="sizenum">30</span>
                </div>

                <div id="div31" style="position:absolute; font-size:12px;margin:56px 0 0 160px;width: 28;height:24">
                    <span id="text31" class="sizenum">31</span>
                </div>
            </div>
            <div class="bottom-words">
                <div class="bottom-words-detail">
                    <div id="outdate"></div>
                    <div id="outsideProblems" to="/edu/showprr/ShowPrr"><span
                            style="text-decoration: underline">客诉</span>：0起</div>
                    <div id="insideProblems" to="/edu/qualityProblemManagement/zlwtgl"><span
                            style="text-decoration: underline">内诉</span>：0起；A类：0起 B类：0起；C类：0起
                    </div>
                </div>
                <div class="legend">
                    <ul>
                        <li>
                            <div class="trancle1"></div>
                            <span>无质量问题</span>
                        </li>
                        <li>
                            <div class="trancle2"></div>
                            <span>内部质量问题</span>
                        </li>
                        <li>
                            <div class="trancle3"></div>
                            <span>客户质量问题</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    //layui初始化
    layui.use(['element', 'table', 'jquery', 'layer', 'laydate', 'admin'], function () {
        var layer = layui.layer;
        var laydate = layui.laydate;
        var admin = layui.admin;
        var config = layui.config;
        var table = layui.table;
        var $ = layui.jquery;
        var basePath = '/html-edu';
        /*初始化日期框*/
        $("#mainHeader").on("click", "li", function () {
            var menus = config.getAccount().captions;
            var menu = $(this).find("a").html();
            if (menus.indexOf(menu) == -1) {
                location.href = '/edu/Comm/Public/Error?msgCode=E00003&module=Fx';
                return false;
            }
        });

        $("#subHeader").on("click", "li", function () {
            var menus = config.getAccount().captions;
            var menu = $(this).find("a").html();
            if (menus.indexOf(menu) == -1) {
                location.href = '/edu/Comm/Public/Error?msgCode=E00003&module=Fx';
                return false;
            }
        });
        //表示是本地测试
        if (config.base_server == '') {
            basePath = '/';
        }
        // 查询该供应商最近的生产日期
        var param = [];
        var url1 = "/api-edu/interaction/qualityruntime/ppmstatus";
        var url2 = "/api-edu/interaction/industryruntime/qualityfeedback";
        var url3 = "/api-edu/interaction/industryruntime/q";
        var url4 = "/api-edu/interaction/qualityruntime/qualityissues";
        var url5 = "/api-edu/interaction/workruntime/bar/pass-rate";
        var url6 = "/api-edu/interaction/industryruntime/qualityRiskWarning";
        var url7 = "/api-edu/interaction/industryruntime/problemmonth";
        admin.req("/api-edu/interaction/industryruntime/getLastTime", param, function (res) {
            var newDate = admin.GetRequest().timeS ? admin.GetRequest().timeS : res.data.latestDate
            /*初始化日期框*/
            var startTime = laydate.render({
                elem: '#search-input',
                value: admin.GetRequest().timeS ? admin.GetRequest().timeS : res.data.latestDate,
                max: newDate,
                done: function (value, date) {
                    //    		console.log(value); //得到日期生成的值，如：2017-08-18
                    //    	    console.log(date); //得到日期时间对象：{year: 2017, month: 8, date: 18, hours: 0, minutes: 0, seconds: 0}
                    endTime.config.min = {
                        year: date.year,
                        month: date.month - 1, //关键
                        date: date.date,
                        hours: date.hours,
                        minutes: date.minutes,
                        seconds: date.seconds
                    };

                }
            });

            /*初始化日期框*/
            var endTime = laydate.render({
                elem: '#search-input2',
                value: admin.GetRequest().timeE ? admin.GetRequest().timeE : res.data.latestDate,
                min: newDate,
                done: function (value, date) {
                    //    		console.log(value); //得到日期生成的值，如：2017-08-18
                    //    	    console.log(date); //得到日期时间对象：{year: 2017, month: 8, date: 18, hours: 0, minutes: 0, seconds: 0}    	   
                    startTime.config.max = {
                        year: date.year,
                        month: date.month - 1, //关键
                        date: date.date,
                        hours: date.hours,
                        minutes: date.minutes,
                        seconds: date.seconds
                    }

                }
            });
            if (res.ok) {
                var dateArr = [];
                var newDate = res.data.latestDate;
                if (newDate == null || newDate == '') {
                    var option = {
                        color: ['#71B7EE'],
                        tooltip: {
                            formatter: function (params, ticket, callback) {
                                return params.seriesName + '<br>' + params.marker + params.name + ':' + params.value + "%";
                            },
                        },
                        grid: {
                            top: '4%',
                            left: '14%',
                            bottom: '24%',
                            right: '5%'
                        },
                        xAxis: [{
                            type: 'category',
                            axisLine: {
                                show: true,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            },
                            axisLabel: {
                                interval: 0
                            },
                            axisTick: {
                                show: false
                            },
                            data: [],
                        }],
                        yAxis: [{
                            type: 'value',
                            axisLabel: {
                                formatter: '{value}%'
                            },
                            min: 0,
                            max: 100,
                            axisLine: {
                                show: true,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            },
                            axisTick: {
                                show: false
                            },
                            splitLine: {
                                show: false,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.2)'

                                }
                            }
                        }],
                        series: [{
                            name: '合格率',
                            type: 'bar',
                            barWidth: '40%',
                            data: []
                        }]
                    };

                    var option2 = {
                        color: ['#71B7EE'],
                        tooltip: {},
                        grid: {
                            top: '4%',
                            left: '14%',
                            bottom: '20%',
                            right: '5%'
                        },
                        xAxis: [{
                            type: 'category',
                            axisLine: {
                                show: true,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            },
                            axisLabel: {
                                interval: 0
                            },
                            axisTick: {
                                show: false
                            },
                            data: []
                        }],
                        yAxis: [{
                            type: 'value',
                            axisLabel: {
                                formatter: '{value}%'
                            },
                            min: 0,
                            max: 100,
                            axisLine: {
                                show: true,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            },
                            axisTick: {
                                show: false
                            },
                            splitLine: {
                                show: false,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.2)'

                                }
                            }
                        }],
                        series: [{
                            name: '完成率',
                            type: 'bar',
                            barWidth: '40%',
                            data: []
                        }]
                    };
                    drawCharts('bar-left-chart', option);
                    drawCharts('pie-left-chart', option2);
                    table.render({
                        elem: '#dateTimeTable',
                        id: 'dateTimeTable',
                        method: 'get',
                        url: '',
                        // 格式化后台返回的数据
                        parseData: function (res) {
                            if (res.ok) {
                                return {
                                    "code": res.respCode, //解析接口状态
                                    "msg": res.message, //解析提示文本
                                    "count": res.data.length, //解析数据长度
                                    "data": res.data //解析数据列表
                                };
                            } else {
                                return {
                                    "code": 0, //解析接口状态
                                    "msg": res.message, //解析提示文本
                                    "count": 0, //解析数据长度
                                    "data": [] //解析数据列表
                                };
                            }

                        },
                        done: function (res, curr, count) {

                        },
                        cols: [
                            [{
                                title: '序号',
                                type: 'numbers',
                                align: 'center'
                            }, {
                                field: 'departName',
                                title: '预警日期',
                                align: 'center',
                            }, {
                                field: 'jobCode',
                                title: '风险类型',
                                align: 'center'
                            }, {
                                field: 'jobName',
                                title: '预警描述',
                                align: 'center'
                            }]
                        ],
                        page: false
                    });

                    table.render({
                        elem: '#dateTimeTable2',
                        id: 'dateTimeTable2',
                        method: 'get',
                        height: '126',
                        url: '',
                        // 格式化后台返回的数据
                        parseData: function (res) {
                            if (res.ok) {
                                return {
                                    "code": res.respCode, //解析接口状态
                                    "msg": res.message, //解析提示文本
                                    "count": res.data.length, //解析数据长度
                                    "data": res.data //解析数据列表
                                };
                            } else {
                                return {
                                    "code": 0, //解析接口状态
                                    "msg": res.message, //解析提示文本
                                    "count": 0, //解析数据长度
                                    "data": [] //解析数据列表
                                };
                            }
                        },
                        cols: [
                            [{
                                title: '序号',
                                type: 'numbers',
                                align: 'center'
                            }, {
                                field: 'departName',
                                title: '发生日期',
                                align: 'center'
                            }, {
                                field: 'companyName',
                                title: '问题来源',
                                align: 'center'
                            }, {
                                field: 'companyCode',
                                title: '零件名称',
                                align: 'center'
                            }, {
                                field: 'email',
                                title: '车型/机型',
                                align: 'center'
                            }, {
                                field: 'jobName',
                                title: '问题描述',
                                align: 'center'
                            }]
                        ],
                        page: false
                    });
                } else {
                    var dateArr = newDate.split("-");
                    if (dateArr.length == 3) {
                        $("#newdate").html(dateArr[0] + "年" + dateArr[1] + "月" + dateArr[2] + "日");
                    } else {
                        $("#newdate").html("无");
                    }
                    $("#outdate").html(dateArr[0] + "年" + dateArr[1] + "月");
                    var startDate = newDate;
                    var endDate = newDate;
                    // PPM状态
                    setBarLeft(url1, startDate, endDate);
                    // 工厂运行总览的质量反馈
                    setQualityFeedback(url2, null, endDate);
                    // 工厂运行总览的Q数据
                    setqData(url3, startDate, endDate);
                    // 查询本月质量问题
                    setqualityIssues(url4, startDate, endDate);
                    // 工艺分类一次交检合格率状态
                    setBarLeft5(url5, startDate, endDate);
                    // 质量风险预警
                    setQuantityWarn(url6, startDate, endDate);
                    // 设定风险日历
                    setRiskDate(url6, startDate, endDate);
                    // 统计整个月的客诉内诉数量
                    setProblemMount(url7, startDate, endDate);
                    var date = new Date();
                    var month = date.getMonth() + 1;
                    $("#today").html(dateArr[0] + "年" + dateArr[1] + "月");
                }
            } else {
                layer.msg(res.message);
            }
        });
        $("#main1").on('click', function () {
            //layer.msg($("#month").text())//点击获取月份

            window.open('/edu/qualityProblemManagement/zlwtgl' + '?&timeS=' + $('#search-input').val() + "&timeE=" + $('#search-input2').val());

        })
        /*查询按钮点击功能*/
        $(".search-button").click(function () {
            $('#dateTimeTable').empty();
            $('#dateTimeTable2').empty();
            //获得开始日期框数据
            var startDate = $(".search-input").val();
            //获得结束日期框数据
            var endDate = $("#search-input2").val();
            var year = endDate.substring(0, 4);
            var exp = endDate.substring(5, 7);
            exp = exp.indexOf("0") == 0 ? exp.substring(exp.length - 1) : exp;
            $("#today").html(year + "年" + exp + "月");

            var year = endDate.substring(0, 4);
            var exp = endDate.substring(5, 7);
            exp = exp.indexOf("0") == 0 ? exp.substring(exp.length - 1) : exp;
            var day = endDate.substring(8, 11);
            day = day.indexOf("0") == 0 ? day.substring(day.length - 1) : day;

            var year1 = startDate.substring(0, 4);
            var exp1 = startDate.substring(5, 7);
            exp1 = exp1.indexOf("0") == 0 ? exp1.substring(exp1.length - 1) : exp1;
            var day1 = startDate.substring(8, 11);
            day1 = day1.indexOf("0") == 0 ? day1.substring(day1.length - 1) : day1;

            if (startDate == null || startDate == '') {
                $("#qualitydate").html(year + '/' + exp + '/' + day);
            } else {
                $("#qualitydate").html(year1 + '/' + exp1 + '/' + day1 + '~' + year + '/' + exp + '/' + day);
            }
            $("#outdate").html(year + "年" + exp + "月");
            //绘制图表
            // PPM状态
            setBarLeft(url1, startDate, endDate);
            // 工厂运行总览的质量反馈
            setQualityFeedback(url2, startDate, endDate);
            // 工厂运行总览的Q数据
            setqData(url3, startDate, endDate);
            // 查询本月质量问题
            setqualityIssues(url4, startDate, endDate);
            // 滚动12个月成品一次交检合格率状态
            setBarLeft5(url5, startDate, endDate);
            // 质量风险预警
            setQuantityWarn(url6, startDate, endDate);
            $("#bar-right-chart").empty();
            // 设定风险日历
            setRiskDate(url6, startDate, endDate);
            // 统计整个月的客诉内诉数量
            setProblemMount(url7, startDate, endDate);
        });

        $('#outsideProblems').on('click', function () {
            var toPath = $(this).attr('to');
            openNewWin(toPath)
        })

        $('#insideProblems').on('click', function () {
            var toPath = $(this).attr('to');
            openNewWin(toPath)
        })

        function openNewWin(toPath) {
            if (toPath) {
                var startDate = $('#search-input').val() ? $('#search-input').val() : latestDate;
                var endDate = $('#search-input2').val() ? $('#search-input2').val() : latestDate;
                if (toPath.indexOf('#!') != -1) {
                    toPath = basePath + toPath;
                }
                // console.log(config.base_server  + toPath + '?from=1&timeS=' + startDate + '&timeE=' + endDate)
                //window.location.href='/'+toPath+'?from=1&startDate='+startDate+'&endDate='+endDate;
                window.open(config.base_server + toPath + '?from=1&timeS=' + startDate + '&timeE=' + endDate);
            }

        }


        /**
         * 功能描述: 统计整个月的客诉内诉数量
         * @param: url
         * @param: 开始时间
         * @param: 结束时间
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        function setProblemMount(url, startDate, endDate) {
            admin.req(url, {
                startDate,
                endDate
            }, function (res) {
                if (res.ok) {
                    setValues_13(res);
                } else {
                    layer.msg(res.message);
                }
            });
        }

        /**
         * 功能描述: 绘制左侧柱状图
         * 查询PPM状态
         * @param: 请求数据后台url
         * @param: 开始日期
         * @param: 结束日期
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 14:27
         */
        function setBarLeft(url, startDate, endDate) {
            admin.req(url, {
                startDate,
                endDate
            }, function (res) {
                if (res.ok) {
                    var json = eval(res);
                    setValues_1(json);
                } else {
                    layer.msg(res.message);
                }
            });
        }
        /**
         * 功能描述: 查询工厂运行总览的质量反馈
         * @param: url
         * @param: 开始时间
         * @param: 结束时间
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        function setQualityFeedback(url, startDate, endDate) {
            admin.req(url, {
                startDate,
                endDate
            }, function (res) {
                if (res.ok) {
                    setValues_2(startDate, endDate, res);
                } else {
                    layer.msg(res.message);
                }
            });
        }
        /**
         * 功能描述: 工厂运行总览的Q数据
         * @param: url
         * @param: 开始时间
         * @param: 结束时间
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        function setqData(url, startDate, endDate) {
            admin.req(url, {
                startDate,
                endDate
            }, function (res) {
                if (res.ok) {
                    setValues_3(res);
                } else {
                    layer.msg(res.message);
                }
            });
        }
        /**
         * 功能描述: 查询本月质量问题
         * @param: url
         * @param: 开始时间
         * @param: 结束时间
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        var scrollTimer;

        function setqualityIssues(url, startDate, endDate) {
            console.log(screen.width)
            var tableHeight;
            if (screen.width == 1920) {
                tableHeight = 200
            } else if (screen.width == 1366) {
                tableHeight = 126
            }
            table.render({
                elem: '#dateTimeTable2',
                id: 'dateTimeTable2',
                method: 'get',
                height: tableHeight,
                url: admin.formatUrl('/api-edu/interaction/qualityruntime/qualityissues'),
                // 格式化后台返回的数据
                parseData: function (res) {
                    if (res.ok) {
                        return {
                            "code": res.respCode, //解析接口状态
                            "msg": res.message, //解析提示文本
                            "count": res.data.length, //解析数据长度
                            "data": res.data //解析数据列表
                        };
                    } else {
                        return {
                            "code": 0, //解析接口状态
                            "msg": res.message, //解析提示文本
                            "count": 0, //解析数据长度
                            "data": [] //解析数据列表
                        };
                    }

                },
                cols: [
                    [{
                        title: '序号',
                        type: 'numbers',
                        align: 'center'
                    }, {
                        field: 'happenDate',
                        title: '发生日期',
                        align: 'center',
                        width: '18%'
                    }, {
                        field: 'pbFrom',
                        title: '问题来源',
                        align: 'center',
                        width: '15%'
                    }, {
                        field: 'assypartsName',
                        title: '零件名称',
                        align: 'center',
                        templet: function (d) {
                            var time = d.assypartsName ? d.assypartsName : "";
                            return '<div title="' + time + '"><span>' + time + '</span></div>'
                        }
                    }, {
                        field: 'carType',
                        title: '车型/机型',
                        align: 'center',
                        width: '16%'
                    }, {
                        field: 'discription',
                        title: '问题描述',
                        align: 'center',
                        templet: function (d) {
                            var time = d.discription ? d.discription : "";
                            return '<div title="' + time + '"><span>' + time + '</span></div>'
                        }
                    }]
                ],
                page: false,
                where: {
                    startDate: startDate,
                    endDate: endDate
                },
                done: function () {
                    var $this = $("#dateTimeTable2").next("div").find(".layui-table-body");
                    var $tbody = $("#dateTimeTable2").next("div").find(".layui-table-body tbody");
                    $tbody.css("position", "absolute");
                    var count = 0;
                    var liCount = $this.find("tr").length;
                    // console.log($this.find("li"))
                    clearInterval(scrollTimer);
                    scrollTimer = setInterval(function () {
                        if (count < liCount && $this.height() < $tbody.height()) {
                            scrollNews($this);
                            count++;
                        } else {
                            $this.find("tbody").css({
                                marginTop: 0
                            });
                            count = 0;
                        }
                    }, 2000);

                    function scrollNews(obj) {
                        var $self = obj.find("tbody");
                        var lineHeight = $self.find("tr:first").height();
                        $self.animate({
                            "top": -33 * count + "px"
                        }, 1000, function () { })

                        // scrollNews(obj)
                    }
                }
            });
        }

        /**
         * 功能描述: 绘制左侧柱状图
         *
         * @param: 请求数据后台url
         * @param: 开始日期
         * @param: 结束日期
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 14:27
         */
        function setBarLeft5(url, startDate, endDate) {
            admin.req(url, {
                startDate,
                endDate
            }, function (res) {
                if (res.ok) {
                    var json = eval(res);
                    if (json.data.target == -1) {
                        $("#passtarget").html('目标值:--');
                    } else {
                        var rate = (json.data.target * 100).toFixed(2);
                        var arr = rate.split(".");
                        if (arr[1] == "00") {
                            rate = arr[0];
                        }
                        $("#passtarget").html('目标值:' + rate + '%');
                    }

                    var xData = [],
                        yData = [];
                    for (var i = 0; i < json.data.runtimeBarVOList.length; i++) {
                        xData.push(json.data.runtimeBarVOList[i].name);
                        yData.push((json.data.runtimeBarVOList[i].value * 100).toFixed(2));
                    }
                    var option = {
                        color: ['#71B7EE'],
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow',
                                crossStyle: {
                                    color: '#999'
                                }
                            },
                            formatter: function (params, ticket, callback) {
                                return params[0].seriesName + '<br>' + params[0].marker + params[0].name + ':' + params[0].value + "%";
                            }
                        },
                        grid: {
                            top: '4%',
                            left: '14%',
                            bottom: '24%',
                            right: '5%'
                        },
                        xAxis: [{
                            type: 'category',
                            axisLine: {
                                show: true,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            },
                            axisLabel: {
                                interval: 0
                            },
                            axisTick: {
                                show: false
                            },
                            data: xData,
                        }],
                        yAxis: [{
                            type: 'value',
                            axisLabel: {
                                formatter: '{value}%'
                            },
                            min: 0,
                            max: function (value) {
                                return value.max;
                            },
                            axisLine: {
                                show: true,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            },
                            axisTick: {
                                show: false
                            },
                            splitLine: {
                                show: false,
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.2)'
                                }
                            }
                        }],
                        series: [{
                            name: '合格率',
                            type: 'bar',
                            barWidth: '40%',
                            barCategoryGap: '50%',
                            data: yData,
                            itemStyle: {
                                normal: {
                                    color: function (param) {
                                        if (param.value < json.data.target * 100) {
                                            return 'red'
                                        } else {
                                            return '#71B7EE'
                                        }
                                    }
                                }
                            },
                            barWidth: 30
                        }]
                    };
                    drawCharts('bar-left-chart', option);
                    // var myChart = echarts.init(document.getElementById('bar-left-chart'));
                    // myChart.setOption(option, true);
                    // myChart.on('click',function(params){
                    //     console.log(params)
                    // })
                } else {
                    layer.msg(res.message);
                }
            });
        }

        /**
         * 功能描述: 获取质量风险预警
         * @param: url
         * @param: 开始时间
         * @param: 结束时间
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        var scrollTimer1;

        function setQuantityWarn(url, startDate, endDate) {
            var riskData = [];
            riskData.push({
                "startDate": startDate
            });
            riskData.push({
                "endDate": endDate
            });
            table.render({
                elem: '#dateTimeTable',
                id: 'dateTimeTable',
                method: 'get',
                url: admin.formatUrl('/api-edu/interaction/industryruntime/qualityRiskWarning'),
                // 格式化后台返回的数据
                parseData: function (res) {
                    if (res.ok) {
                        return {
                            "code": res.respCode, //解析接口状态
                            "msg": res.message, //解析提示文本
                            "count": res.data.length, //解析数据长度
                            "data": res.data //解析数据列表
                        };
                    } else {
                        return {
                            "code": 0, //解析接口状态
                            "msg": res.message, //解析提示文本
                            "count": 0, //解析数据长度
                            "data": [] //解析数据列表
                        };
                    }

                },
                cols: [
                    [{
                        title: '序号',
                        type: 'numbers',
                        align: 'center'
                    }, {
                        field: 'riskDate',
                        title: '预警日期',
                        align: 'center',
                        templet: function (d) {
                            var time = d.riskDate ? d.riskDate : "";
                            return '<div title="' + time + '"><span>' + time + '</span></div>'
                        }
                    }, {
                        field: 'riskType',
                        title: '风险类型',
                        align: 'center'
                    }, {
                        field: 'warninRemark',
                        title: '预警描述',
                        align: 'center',
                        templet: function (d) {
                            var time = d.warninRemark ? d.warninRemark : "";
                            return '<div title="' + time + '"><span>' + time + '</span></div>'
                        }
                    }]
                ],
                page: false,
                where: {
                    startDate: startDate,
                    endDate: endDate
                },
                done: function () {
                    var $this = $("#dateTimeTable").next("div").find(".layui-table-body");
                    var $tbody = $("#dateTimeTable").next("div").find(".layui-table-body tbody");
                    $tbody.css("position", "absolute");
                    var count = 0;
                    var liCount = $this.find("tr").length;
                    // console.log($this.find("li"))
                    clearInterval(scrollTimer1);
                    scrollTimer1 = setInterval(function () {
                        if (count < liCount && $this.height() < $tbody.height()) {
                            scrollNews($this);
                            count++;
                        } else {
                            $this.find("tbody").css({
                                marginTop: 0
                            });
                            count = 0;
                        }
                    }, 2000);

                    function scrollNews(obj) {
                        var $self = obj.find("tbody");
                        var lineHeight = 33;
                        $self.animate({
                            "top": -lineHeight * count + "px"
                        }, 1000, function () { })

                        // scrollNews(obj)
                    }
                }
            });
        }
        /**
         * 功能描述: 组装echarts柱状图所需参数，并画出柱状图
         * 查询PPM状态
         * @param: 从后台请求的json数据
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        function setValues_1(json) {
            var namePpm = [],
                valuePpm = [],
                targetPpm = [];
            if (json.data.target == -1) {
                $("#ppmtarget").html('目标值:--');
            } else {
                $("#ppmtarget").html('目标值:' + json.data.target.toFixed(2));
            }
            $("#ppmstatus").html(json.message);
            for (var i = 0; i < json.data.returnCharsVOS.length; i++) {
                namePpm.push(json.data.returnCharsVOS[i].name);
                valuePpm.push(json.data.returnCharsVOS[i].value.toFixed(2));
                targetPpm.push(json.data.returnCharsVOS[i].target);
            }
            var option2 = {
                color: ['#71B7EE'],
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow',
                        crossStyle: {
                            color: '#999'
                        }
                    }
                },
                legend: {
                    data: ['PPM状态', '目标值'],
                    textStyle: {
                        color: 'rgba(255,255,255,0.6)'
                    },
                    top: '4%',
                    itemHeight: 8,
                    itemWidth: 30
                },
                grid: {
                    top: '15%',
                    left: '14%',
                    bottom: '25%',
                    right: '14%'
                },
                xAxis: [{
                    type: 'category',
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: 'rgba(255,255,255,0.6)'
                        }
                    },
                    axisLabel: {
                        interval: 0
                    },
                    axisTick: {
                        show: false
                    },
                    data: namePpm
                }],
                yAxis: [{
                    type: 'value',
                    axisLabel: {
                        formatter: '{value}'
                    },
                    min: function (value) {
                        return value.min;
                    },
                    max: function (value) {
                        return value.max;
                    },
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: 'rgba(255,255,255,0.6)'
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    splitLine: {
                        show: false,
                        lineStyle: {
                            color: 'rgba(255,255,255,0.2)'

                        }
                    }
                }, {
                    type: 'value',
                    name: '',
                    min: function (value) {
                        return value.min;
                    },
                    max: function (value) {
                        return value.max;
                    },

                    splitLine: {
                        show: false,
                        lineStyle: {
                            color: '#FFF',
                            opacity: 0.2
                        }
                    },
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: 'rgba(255,255,255,0.6)'
                        }
                    }
                }],
                series: [{
                    name: 'PPM状态',
                    type: 'bar',
                    barCategoryGap: '50%',
                    barWidth: '40%',
                    data: valuePpm
                }, {
                    name: '目标值',
                    type: 'line',
                    yAxisIndex: 1,
                    itemStyle: {
                        color: '#FFB90C'
                    },
                    data: targetPpm
                }]
            };
            drawCharts('pie-left-chart', option2);
        }

        /**
         * 功能描述: 质量反馈
         * 查询工厂运行总览的质量反馈
         * @param: 从后台请求的json数据
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        function setValues_2(startDate, endDate, info) {
            var zeroBugDays = info.data.zeroBugDays;
            var badCount = info.data.badCount;
            var scarpCount = info.data.scarpCount;
            var qualityCount = info.data.qualityCount;
            var dtMinutes = info.data.dtMinutes;
            var bigQualityCount = info.data.bigQualityCount;
            if (startDate == '' || startDate == null) {
                $("#inside").html("内部质量：零缺陷" + zeroBugDays + "天，当年不良累计" + badCount + "件，累计报废" + scarpCount + "件。");
                $("#outside").html("客户反馈：当年现场质量问题" + qualityCount + "起；DT质量停线" + dtMinutes + "分钟；重大质量问题" + bigQualityCount + "起。");
            } else {
                $("#inside").html("内部质量：零缺陷" + zeroBugDays + "天，时间期间内不良累计" + badCount + "件，累计报废" + scarpCount + "件。");
                $("#outside").html("客户反馈：时间期间内现场质量问题" + qualityCount + "起；DT质量停线" + dtMinutes + "分钟；重大质量问题" + bigQualityCount + "起。");
            }
        }
        /**
         * 功能描述: 工厂运行总览的Q数据
         * 统工厂运行总览的Q数据
         * @param: 从后台请求的json数据
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        function setValues_3(json) {
            var date = [];
            var curDate = new Date().getDate() < 10 ? "0" + new Date().getDate() : new Date().getDate();
            var curMonth = new Date().getFullYear() + '' + (new Date().getMonth() + 1);
            var dataMonth = Object.keys(json.data)[0].substring(4, 6);
            dataMonth = dataMonth.indexOf("0") == 0 ? Object.keys(json.data)[0].substring(0, 4) + dataMonth.substring(dataMonth.length - 1) : Object.keys(json.data)[0].substring(0, 4) + dataMonth;
            for (var i in json.data) {
                date.push(i);
                if (i.substring(6) == "01" || i.substring(6) == "03" || i.substring(6) == "05" || i.substring(6) == "07" ||
                    i.substring(6) == "09" || i.substring(6) == "11" || i.substring(6) == "03" || i.substring(6) == "12" ||
                    i.substring(6) == "14" || i.substring(6) == "16" || i.substring(6) == "18" || i.substring(6) == "20" ||
                    i.substring(6) == "21" || i.substring(6) == "23" || i.substring(6) == "25" || i.substring(6) == "27" ||
                    i.substring(6) == "28" || i.substring(6) == "30" || i.substring(6) == "31") {
                    if (curMonth > dataMonth) {
                        if (json.data[i] == "0") {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 42.png");
                        } else if (json.data[i] == "1") {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 40.png");
                        } else if (json.data[i] == "2") {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 41.png");
                        }
                        if (Object.keys(json.data).length != 31) {
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 28) {
                            $("#img29").attr("src", "../../assets/images/triangle/greytriangle.png");
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 29) {
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                    } else if (curMonth < dataMonth) {
                        $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                    } else {
                        if (curDate >= i.substring(6)) {
                            if (json.data[i] == "0") {
                                $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 42.png");
                            } else if (json.data[i] == "1") {
                                $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 40.png");
                            } else if (json.data[i] == "2") {
                                $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 41.png");
                            }
                        } else {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length != 31) {
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 28) {
                            $("#img29").attr("src", "../../assets/images/triangle/greytriangle.png");
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 29) {
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                    }
                } else {
                    if (curMonth > dataMonth) {
                        if (json.data[i] == "0") {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 39.png");
                        } else if (json.data[i] == "1") {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/reddown.png");
                        } else if (json.data[i] == "2") {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 38.png");
                        }
                        if (Object.keys(json.data).length != 31) {
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 28) {
                            $("#img29").attr("src", "../../assets/images/triangle/greytriangle.png");
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 29) {
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                    } else if (curMonth < dataMonth) {
                        $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/greytriangle.png");
                    } else {
                        if (curDate >= i.substring(6)) {
                            if (json.data[i] == "0") {
                                $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 39.png");
                            } else if (json.data[i] == "1") {
                                $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/reddown.png");
                            } else if (json.data[i] == "2") {
                                $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/-s-组 38.png");
                            }
                        } else {
                            $("#" + 'img' + i.substring(i.length - 2)).attr("src", "../../assets/images/triangle/greytriangle.png");
                        }
                        if (Object.keys(json.data).length != 31) {
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 28) {
                            $("#img29").attr("src", "../../assets/images/triangle/greytriangle.png");
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                        if (Object.keys(json.data).length == 29) {
                            $("#img30").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                            $("#img31").attr("src", "../../assets/images/triangle/greytriabgle-top.png");
                        }
                    }
                }
            }
            var exp = date[0].substring(4, 6);
            exp = exp.indexOf("0") == 0 ? exp.substring(exp.length - 1) : exp;
            $("#month").html(exp + "月");
        }

        /**
         * 功能描述: 客诉内诉数量
         * 统计整个月的客诉内诉数量
         * @param: 从后台请求的json数据
         * @return: null
         * @auther: yelj
         * @date: 2019/02/18 16:38
         */
        function setValues_13(info) {
            if ($.isEmptyObject(info.data)) {
                $("#outsideProblems").html("<span>客诉</span>：" + "无数据");
                $("#insideProblems").html("<span>内诉</span>：" + "无数据；A类：" + "无数据  B类：" + "无数据；C类：" + "无数据");
            } else {
                var outsideProblems = info.data.outsideProblems;
                var insideProblem = info.data.insideProblem;
                var insideProblemA = info.data.insideProblemA;
                var insideProblemB = info.data.insideProblemB;
                var insideProblemC = info.data.insideProblemC;
                $("#outsideProblems").html("<span>客诉</span>：" + outsideProblems + "起");
                $("#insideProblems").html("<span>内诉</span>：" + insideProblem + "起；A类：" + insideProblemA + "起  B类：" + insideProblemB + "起；C类：" + insideProblemC + "起");
            }
        }

        /**
         * @Desc  绘制柱状图
         * @Param elem :HTML元素ID;option:图形配置项
         * @Date 2019-1-22 10:34:52
         * @Author yelj
         */
        // function drawCharts(elem, option) {
        //     var myChart = echarts.init(document.getElementById(elem));
        //     myChart.setOption(option, true);
        // }
        function drawCharts(elem, option) {
            echarts.init(document.getElementById(elem)).dispose();
            var myChart = echarts.init(document.getElementById(elem));
            myChart.setOption(option, true);
            myChart.on('click', function (params) {
                handleEchartClick(elem, params)
            })
            window.addEventListener("resize", function () {
                myChart.resize();
            });
        }

        function handleEchartClick(elem, params) {
            var dateRang = [$('#search-input').val(), $('#search-input2').val()];
            params.dateRang = dateRang;
            var type = params.name;
            //console.log(dateRang)
            switch (elem) {
                case 'bar-left-chart':
                    toOpenBarPath(params, '#!product_qualificationRate', 0);
                    break
                case 'pie-left-chart':
                    if (type == "来料PPM") {
                        window.open('/edu/Defect/showdefect' + '?&timeS=' + dateRang[0] + "&timeE=" + dateRang[1] + "&responPart=采购件");
                    } else if (type == "过程PPM") {
                        window.open(basePath + '#!quality_unqualified' + '?&timeS=' + dateRang[0] + "&timeE=" + dateRang[1]);
                    }
                    //toOpenBarPath(params, '/#!product_index/OEE', 1);
                    break
                default:
                    break

            }

        }

        function toOpenBarPath(params, url, type) {
            var time = params.dateRang;

            //console.log(config.base_server)
            if (time) {
                var startDate = time[0];
                var endDate = time[1];
                // var year = time.substring(0, 4);
                // var month = time.substring(4, 6);
                // var lastDate = laydate.getEndDate(month, year);
                // var startDate = year + '-' + month + '-01';
                // var endDate = year + '-' + month + '-' + lastDate;

                if (type == 0) {
                    window.open(basePath + url + '?&timeS=' + startDate + "&timeE=" + endDate);
                } else {

                    location.href = basePath + url + '?&timeS=' + startDate + "&timeE=" + endDate;
                }
            }
        }

        function setRiskDate(url, startDate, endDate) {
            admin.req(url, {
                startDate,
                endDate
            }, function (res) {
                if (res.ok) {
                    var json = eval(res);
                    if (json.data != null && json.data.length > 0) {
                        $("#bar-right-chart").empty();
                        var mark = {};
                        for (var i = 0; i < json.data.length; i++) {
                            mark[json.data[i].riskDate.substring(0, 10)] = '';
                        }
                        laydate.render({
                            elem: '#bar-right-chart',
                            position: 'static',
                            // 不显示底部栏
                            showBottom: false,
                            theme: 'grid',
                            value: endDate,
                            change: function (value, date) { //监听日期被切换
                                //页面还没有
                                //location.href = config.base_server+ '/edu/riskForecast';
                            },
                            // 事件
                            mark: mark
                        });
                        for (var i = 0; i < json.data.length; i++) {
                            var dateArr = [];
                            dateArr = json.data[i].riskDate.split("-");
                            var month = dateArr[1].indexOf("0") == 0 ? dateArr[1].substring(dateArr[1].length - 1) : dateArr[1];
                            var day = dateArr[2].substring(0, 2);
                            var date = dateArr[0] + "-" + month + "-" + day;
                            var elem = $("#bar-right-chart td[lay-ymd='" + date + "']");
                            if (json.data[i].riskLevelName == '0') {
                                elem.find("span.laydate-day-mark").append("<style>td[lay-ymd='" + date + "'] span.laydate-day-mark::after{border-top: 10px solid green;}</style>");
                            } else if (json.data[i].riskLevelName == '1') {
                                elem.find("span.laydate-day-mark").append("<style>td[lay-ymd='" + date + "'] span.laydate-day-mark::after{border-top: 10px solid blue;}</style>");
                            } else if (json.data[i].riskLevelName == '2') {
                                elem.find("span.laydate-day-mark").append("<style>td[lay-ymd='" + date + "'] span.laydate-day-mark::after{border-top: 10px solid yellow;}</style>");
                            } else if (json.data[i].riskLevelName == '3') {
                                elem.find("span.laydate-day-mark").append("<style>td[lay-ymd='" + date + "'] span.laydate-day-mark::after{border-top: 10px solid red;}</style>");
                            };
                        }
                    } else {
                        laydate.render({
                            elem: '#bar-right-chart',
                            position: 'static',
                            // 不显示底部栏
                            showBottom: false,
                            theme: 'grid',
                            istoday: true,
                            value: endDate,
                            // 事件
                            change: function (value, date) { //监听日期被切换
                                //页面还没有
                                //location.href = config.base_server+ '/edu/riskForecast';
                            },
                            mark: mark
                        });
                    }
                } else {
                    layer.msg(res.message);
                }
            });
        }
    });
</script>